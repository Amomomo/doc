---
sidebar_position: 2
---

# 2023-08-04 

## GitLab 를 구축하며 

### (1) 프로젝트의 목표

회사의 자산인 소스의 형상관리를 하기 위해, 자체적으로 GitLab을 구축합니다. 현재 많이 쓰이는 git 과 같은 체계를 가지고 있으며, 직접 모든 것을 설정할 수 있다는 장점을 가지고 있습니다. 모든 것을 다 설정할 수 있다는 것은 장점이자.. 단점인걸로..

일단 도커에 이미지 파일을 받아서 컨테이너를 구축하는 방향으로 진행 중인데, 외부 접속 port 설정이 너무 어렵습니다. 그리고 git 에 커밋을 할 경우 담당자인 누군가가 계속 업데이트 된 내용을 pull 로 땡겨와서 배포를 해야되는 과정이 번거로울 것으로 예상 되어, CI/CD 환경을 구축하려고 합니다. 

해당 CI/CD 환경은 gitlab CI pipeline 을 사용하려고 합니다. 그러기 위해서는 gitlab-runner 를 설치해야 합니다. 
gitlab-runner 를 설치하여 gitlab과 연동하는 과정을 거쳐야 합니다. 

근데 gitlab 환경설정만 해도 정신 나갈거같애..

docker -> gitlab 컨테이너 접속 명령어
```
sudo docker exec -it [컨테이너 이름] bash
```
**예시**
```
sudo docker exec -it gitlab-gitlab-ce1 bash
```

### gitlab 설정해주기 

1. gitlab 이미지 파일을 컨테이너로 실행합니다. 
2. gitlab 의 포트를 설정해주고, synology 서버의 방화벽을 설정해줍니다. 
3. gitlab 의 root 계정의 패스워드를 설정해줍니다. 
4. gitlab 의 gitlab.rb 파일을 수정해줍니다. ( external_url , nginx['listen_port'] = 80  )
5. root 계정으로 로그인 후 새로운 워크스페이스를 생성합니다. 
6. git clone 이 정상적으로 되는지 확인합니다. 
7. git commit 테스트를 합니다. 

```
git add . 
git commit -m "커밋메세지"
git push -u origin main

git status
```

8. git push, pull 테스트가 완료가 됐습니다. 

### gitlab runner 설정해주기 

gitlab runner 에서 필요한 package 들을 깔아주기 위해 npm 을 설치한다. 앞서 node js 를 설치한다. 
```
E: Unable to locate package nodejs
```
라는 에러가 나길래 
```
apt-get update
```
라는 명령어를 먼저 실행해주고 
```
apt install nodejs 
```
로 node 를 설치해줬다. 
```
apt inatll npm 
```
도 설치를 진행했다. 
npm 설치가 개 오래걸린다..

```
apt install sudo
```
sudo 명령어가 먹히지 않아서 해당 명령어도 설치를 진행해줬다. 



### (2) 주요 이정표


### (3) 전반적인 결과



# 2. 성과 



# 3. 도전과 실패 



# 4. 학습 내용 



# 5. 개선 사항 및 향후 계획 



# 6. 프로젝트 평가 및 피드백 

